<!DOCTYPE HTML>
<html>
<head>
    <title>Phantom by HTML5 UP</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <div class="inner">
                <!-- Logo and Search Bar Container -->
                <div class="logo-container">
                    <a href="index.html" class="logo">
                        <span class="symbol"><img src="images/자동차.gif" alt="" /></span><span class="title">주차잇슈</span>
                    </a>
                    <!-- Search Bar -->
                    <div class="search-bar-container">
                        <img src="images/돋보기.png" alt="검색 아이콘" class="search-icon" />
                        <input type="text" class="search-bar" placeholder="검색어를 입력하세요">
                    </div>
                </div>
            </div>
        </header>

        <!-- Main -->
        <div id="main">
            <div class="inner">
                <!-- 지도 섹션 -->
                <div class="parking-info-container">
                    <div class="map-section">
                        <!-- Leaflet 지도를 표시할 div -->
                        <div id="map" style="position: relative; width: 100vw; height: 76vh;"></div>
                    </div>
                </div>
                <!-- 현재 위치 찾기 버튼 -->
                <!-- <button id="find-me">내 위치 찾기</button> -->
                <!-- <div id="status"></div>
                <a id="map-link" href="" target="_blank"></a> -->
            </div>
        </div>
        <div class="navi">
            <div class="navi-section">
                <nav class="navbar">
                    <ul>
                        <li><a href="index.html"><img src="images/sweethome.png" alt="Home" /> HOME</a></li>
                        <li><a href="about.html"><img src="images/hotplace.png" alt="About" /> HOT PLACE</a></li>
                        <li><a href="services.html"><img src="images/bookmark.png" alt="Services" /> BOOKMARKS</a></li>
                        <li><a href="contact.html"><img src="images/mypage.png" alt="Contact" /> MY PAGE</a></li>
                    </ul>
                </nav>
            </div>
        </div>

    <!-- 지도 그리는 곳 -->

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <!-- Initialize the Leaflet Map -->
    <script>
        // 지도 초기화 (서울 좌표 및 줌 레벨 설정)
        var map = L.map('map').setView([37.5665, 126.9780], 13);

        // OpenStreetMap 타일 레이어 추가
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 21,
            attribution: '© OpenStreetMap'
        }).addTo(map);

        // GeoFindMe 함수 - 현재 위치 찾기
        function geoFindMe() {
            const status = document.querySelector("#status");
            const mapLink = document.querySelector("#map-link");

            mapLink.href = "";
            mapLink.textContent = "";

            function success(position) {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;

                // 상태 텍스트 초기화
                status.textContent = "";
                mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
                mapLink.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;

                // 지도에서 현재 위치에 마커 추가
                var marker = L.marker([latitude, longitude]).addTo(map);
                marker.bindPopup("<b>내 위치</b>").openPopup();

                // 지도 중심을 현재 위치로 이동
                map.setView([latitude, longitude], 15);
            }

            function error() {
                status.textContent = "Unable to retrieve your location";
            }

            if (!navigator.geolocation) {
                status.textContent = "Geolocation is not supported by your browser";
            } else {
                status.textContent = "Locating…";
                navigator.geolocation.getCurrentPosition(success, error);
            }
        }
        // "내 위치 찾기" 버튼 클릭 시 geoFindMe 함수 실행
        document.querySelector("#find-me").addEventListener("click", geoFindMe);
    </script>

    <!-- Additional Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html>
